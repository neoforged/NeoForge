--- a/net/minecraft/world/item/crafting/RepairItemRecipe.java
+++ b/net/minecraft/world/item/crafting/RepairItemRecipe.java
@@ -47,7 +_,9 @@
             && stack1.has(DataComponents.MAX_DAMAGE)
             && stack2.has(DataComponents.MAX_DAMAGE)
             && stack1.has(DataComponents.DAMAGE)
-            && stack2.has(DataComponents.DAMAGE);
+            && stack2.has(DataComponents.DAMAGE)
+            && stack1.isRepairable()
+            && stack2.isRepairable();
     }
 
     public boolean matches(CraftingInput input, Level level) {
